---
- hosts: k8smaster
  tasks:

  - name: Nodes - all
    shell: kubectl get nodes
    become: yes
    become_user: admin
    become_method:  su
    register: token

  - debug:
      var: token
      verbosity: 0

  - name: Pods - kube-system
    shell: kubectl get pods --namespace=kube-system
    become: yes
    become_user: admin
    become_method:  su
    register: token

  - debug:
      var: token
      verbosity: 0

  - name: Pods - all-namespaces
    shell: kubectl get pods --all-namespaces
    become: yes
    become_user: admin
    become_method:  su
    register: token

  - debug:
      var: token
      verbosity: 0

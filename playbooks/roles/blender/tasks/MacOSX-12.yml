---
- get_url:
    url: https://ftp.nluug.nl/pub/graphics/blender/release/Blender2.91/blender-2.91.0-macOS.dmg
    dest: ./blender.dmg

- shell: |
    url=blender.dmg

    folder="Blender"
    app="Blender.app"

    hdiutil attach -nobrowse "$url"
    volume="/Volumes/$folder"
    cp -R "$volume/$app" /Applications/ && echo OK
    hdiutil detach "$volume"
  register: shell
  become: yes
  changed_when: "'OK' not in shell.stdout"
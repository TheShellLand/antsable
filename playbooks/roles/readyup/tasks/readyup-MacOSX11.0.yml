---
- set_fact:
    install: /tmp/readyup

- name: temp install
  file: path={{ install }} state=directory

- name: brew
  shell: |
    if ! which brew >/dev/null; then
      arch -x86_64 /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    fi

- name: vagrant
  shell: arch -x86_64 brew cask install vagrant

- name: wget
  shell: arch -x86_64 brew install wget

- name: tmux
  shell: arch -x86_64 brew install tmux

- name: darktable
  shell: arch -x86_64 brew cask install darktable

- name: pycharm-ce
  shell: arch -x86_64 brew cask install pycharm-ce

- name: vmware-fusion
  shell: arch -x86_64 brew cask install vmware-fusion

- name: audacity - download
  ansible.builtin.git:
    repo: 'https://github.com/TheShellLand/audacity-mac.git'
    dest: "{{install}}/audacity-mac"

- name: audacity - install
  shell: |
    hdiutil attach -nobrowse "{{install}}/audacity-mac/audacity-macos-2.4.2.dmg"
    #hdiutil attach -nobrowse https://github.com/TheShellLand/audacity-mac/raw/master/audacity-macos-2.4.2.dmg
    cp -R "/Volumes/Audacity 2.4.2/Audacity.app" /Applications/
    hdiutil detach "/Volumes/Audacity 2.4.2/"
  become: yes


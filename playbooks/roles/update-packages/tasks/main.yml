---
#- debug:
#    var: ansible_facts.os_family

- include_tasks: "{{ansible_facts.os_family}}.yml"

- name: Reboot the server
  reboot:
  become: yes
  when: reboot

- name: Wait for the server to come back online
  wait_for_connection:
    connect_timeout: 60
    sleep: 5
    delay: 5
    timeout: 300
  when: reboot

- include_tasks: "{{ansible_facts.os_family}}-validate.yml"
- include_role: "{{ validate }}"

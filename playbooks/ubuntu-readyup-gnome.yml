---
- hosts: all
  tasks:

  - name: /tmp/apps
    file: path=/tmp/apps state=directory

  - name: chdir
    shell: cd /tmp/apps

  - name: Install Missing Packages
    shell: apt install -f -y

  - name: ubuntu-gnome-desktop
    apt:
      name: ubuntu-gnome-desktop
      state: present

#  - name: Configure for gdm - debconf
#    debconf:
#      name: gdm3
#      question: shared/default-x-display-manager
#      vtype: select
#      value: gdm3
#
#  - name: Configure for gdm - file
#    replace:
#      path: /etc/X11/default-display-manager
#      regexp: '.*'
#      replace: /usr/sbin/gdm
#      backup: yes

###
### PRETTY UI
###

  - name: Gnome Extensions
    shell: |
      apps=/tmp/apps
      wget -O $apps/no-title-bar.zip https://extensions.gnome.org/download-extension/no-title-bar%40franglais125.gmail.com.shell-extension.zip?version_tag=7334
      wget -O $apps/shell-extension.zip https://extensions.gnome.org/extension-data/user-theme%40gnome-shell-extensions.gcampax.github.com.v32.shell-extension.zip
      wget -O $apps/hidetopbar.zip https://extensions.gnome.org/download-extension/hidetopbar%40mathieu.bidon.ca.shell-extension.zip?version_tag=7714
      wget -O $apps/window-corner.zip https://extensions.gnome.org/extension-data/window-corner-previewfabiomereu.it.v4.shell-extension.zip

      mkdir -p /usr/share/gnome-shell/extensions

      unzip -o $apps/no-title-bar.zip -d /usr/share/gnome-shell/extensions/no-title-bar@franglais125.gmail.com
      unzip -o $apps/shell-extension.zip -d /usr/share/gnome-shell/extensions/user-theme@gnome-shell-extensions.gcampax.github.com
      unzip -o $apps/hidetopbar.zip -d /usr/share/gnome-shell/extensions/hidetopbar@mathieu.bidon.ca
      unzip -o $apps/window-corner.zip -d /usr/share/gnome-shell/extensions/window-corner-preview@fabiomereu.it

      chmod -R +r /usr/share/gnome-shell/extensions
    args:
      executable: /bin/bash

  - name: Arrongin theme
    git:
      repo: https://github.com/paullinuxthemer/Arrongin-GTK.git
      dest: /tmp/apps/arrogin
      update: yes
  - name: install Arrongin
    shell: |
      cd /tmp/apps/arrogin
      cp -rv 'Arrongin-Buttons-Right=>3.30' /usr/share/themes/
    args:
      executable: /bin/bash

  - name: Telinkrin theme
    git:
      repo: https://github.com/paullinuxthemer/Telinkrin-GTK.git
      dest: /tmp/app/telinkrin
      update: yes
  - name: install telinkrin
    shell: |
      cd /tmp/app/telinkrin
      cp -rv 'Telinkrin-Buttons-Right=>3.30' /usr/share/themes/
    args:
      executable: /bin/bash

  - name: Ubuntu CommuniThemes repo
    apt_repository: repo='ppa:communitheme/ppa'
  - name: ubuntu-communitheme-session
    apt: update_cache=no name=ubuntu-communitheme-session state=latest

  - name: oranchelo-icon-theme repo
    apt_repository: repo='ppa:oranchelo/oranchelo-icon-theme'
  - name: oranchelo-icon-theme
    apt: update_cache=yes name=oranchelo-icon-theme state=latest

  - name: arc-icon-theme
    shell: |
      apps=/tmp/apps
      if [ ! -d "$apps/arc-icon-theme" ]; then mkdir "$apps/arc-icon-theme"; fi
      if [ ! -d $apps/arc-icon-theme/Arc ]; then
          git clone https://github.com/horst3180/arc-icon-theme.git "$apps/arc-icon-theme"
          cp -r $apps/arc-icon-theme/Arc /usr/share/icons
      else
          cp -r $apps/arc-icon-theme/Arc /usr/share/icons
      fi

  - name: capitaine-cursors
    shell: |
      apps=/tmp/apps
      file=capitaine-cursors.tgz
      if [ ! -d $apps/capitaine-cursors ]; then mkdir $apps/capitaine-cursors; fi
      if [ ! -f $apps/$file ]; then
          wget -q -O $apps/$file https://github.com/keeferrourke/capitaine-cursors/archive/r2.1.tar.gz
          tar zxf $apps/$file -C $apps/capitaine-cursors
          cp -r $apps/capitaine-cursors/capitaine-cursors-r2.1/dist /usr/share/icons/capitaine-cursors
      else
          tar zxf $apps/$file -C $apps/capitaine-cursors
          cp -r $apps/capitaine-cursors/capitaine-cursors-r2.1/dist /usr/share/icons/capitaine-cursors
      fi

  - name: mac fonts
    shell: |
      apps=/tmp/apps
      fonts=mac-fonts.zip
      if [ ! -f $apps/$fonts ]; then
          wget -q -O $apps/$fonts http://drive.noobslab.com/data/Mac/macfonts.zip
          unzip $apps/$fonts -d /usr/share/fonts
          #rm $apps/$fonts
      else
          unzip -o $apps/mac-fonts.zip -d /usr/share/fonts
      fi
      fc-cache -f -v
